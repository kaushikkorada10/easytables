<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PNG to PDF Converter</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f2f2f2;
      color: #333;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    #preview {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    #preview img {
      width: 150px;
      height: auto;
      border: 1px solid #ccc;
      padding: 4px;
      background-color: white;
    }
    input[type="file"], button {
      margin-bottom: 15px;
      padding: 10px;
      font-size: 16px;
    }
    button {
      cursor: pointer;
    }
  </style>

</head>
<body>



<div class="form-group">
  <label for="conversionType"><strong>Choose conversion type:</strong></label>
  <select class="form-control" id="conversionType" onchange="updateAcceptType()">
    <option value="jpeg-png">JPEG to PNG</option>
    <option value="png-webp">PNG to WebP</option>
    <option value="bmp-jpg">BMP to JPG</option>
    <option value="gif-png">GIF to PNG</option>
    <option value="svg-png">SVG to PNG</option>
  </select>
</div>

<div class="form-group">
  <label for="fileInput"><strong>Upload Image:</strong></label>
  <input class="form-control-file" id="fileInput" type="file" />
</div>

<button class="btn btn-primary" onclick="convertImage()">Convert Image</button>
<div class="mt-3" id="downloadLink"></div>

<script>
  function updateAcceptType() {
    const type = document.getElementById("conversionType").value;
    const fileInput = document.getElementById("fileInput");

    switch (type) {
      case "jpeg-png":
        fileInput.accept = ".jpeg, .jpg, image/jpeg";
        break;
      case "png-webp":
        fileInput.accept = ".png, image/png";
        break;
      case "bmp-jpg":
        fileInput.accept = ".bmp, image/bmp";
        break;
      case "gif-png":
        fileInput.accept = ".gif, image/gif";
        break;
      case "svg-png":
        fileInput.accept = ".svg, image/svg+xml";
        break;
      default:
        fileInput.accept = "image/*";
    }
  }

  window.onload = updateAcceptType;

  function convertImage() {
    const fileInput = document.getElementById("fileInput");
    const file = fileInput.files[0];
    const type = document.getElementById("conversionType").value;

    if (!file) {
      alert("Please upload an image file.");
      return;
    }

    const reader = new FileReader();
    reader.onload = function(e) {
      const img = new Image();
      img.onload = function() {
        const canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0);

        let format, mime;
        switch (type) {
          case "jpeg-png":
            mime = "image/png"; format = "png"; break;
          case "png-webp":
            mime = "image/webp"; format = "webp"; break;
          case "bmp-jpg":
            mime = "image/jpeg"; format = "jpg"; break;
          case "gif-png":
            mime = "image/png"; format = "png"; break;
          case "svg-png":
            mime = "image/png"; format = "png"; break;
          default:
            mime = "image/png"; format = "png";
        }

        const dataURL = canvas.toDataURL(mime);
        const link = document.createElement("a");
        link.href = dataURL;

        const originalName = file.name.substring(0, file.name.lastIndexOf(".")) || file.name;
        link.download = `${originalName}_converted.${format}`;

        link.textContent = "Download Converted Image";
        link.className = "btn btn-success mt-3";

        const output = document.getElementById("downloadLink");
        output.innerHTML = "";
        output.appendChild(link);
      };

      // Handle SVG differently
      if (type === "svg-png" && file.type === "image/svg+xml") {
        const svgBlob = new Blob([e.target.result], { type: 'image/svg+xml' });
        const url = URL.createObjectURL(svgBlob);
        img.src = url;
      } else {
        img.src = e.target.result;
      }
    };

    reader.readAsDataURL(file);
  }
</script>


</body>
</html>
